
<!-- Welcome to some sample code to control your Firebase Database -->
<!-- HERE IS YOUR HTML TO SET UP YOUR PAGE -->
<html>
    <head>
    	<link rel="stylesheet" href="indexStyle.css">
    	<title>Music From My Computer</title>
        <!-- HERE ARE YOUR FIREBASE and GOOGLE AUTHENICATION IMPORTS -->
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-database.js"></script>
        <script src="https://apis.google.com/js/platform.js" async defer></script>

        <!-- Add SDKs for Firebase products that you want to use 
          https://firebase.google.com/docs/web/setup#available-libraries -->
 
    </head>

<!-- this website is for all the music i have on my computer (ie. all of the songs i have recorded). because the website plays the music from my computer, only i will be able to use this page -->

<body>

<div class="topnav">
  <a href="index.html">Home</a>
  <a href="listofbands.html">List of Bands</a>
</div>

<div class="title">
	<h1 style="margin-top: 20px;">Music From My Computer</h1>
</div>

<h2>Click the play buttons to open up the song.</h2>

<h3>Songs I wrote ironically:</h3>

<!-- these are all linked to various functions, 'play', 'pause' and 'stop', and are all given a class 'audio__' so that the functions can cycle through the 'audio' class and affect each song one by one, rather than having a 'play1' function for the first song, a 'play2' function for the second song, and so on -->

<button onclick = "play('audio1')">Play</button>
<button onclick = "pause('audio1')">Pause</button>
<button onclick = "stop('audio1')">Stop</button>
<audio src="Songs/Mme. Loisel.WAV" id="audio1" class="audio"></audio>
<p class='songinfo'>Mme. Loisel - <a href="rendevous.html">Rendevous</a> (Songs to Make Your Friends Like You Less, 2020)</p>

<!-- this one was written half-ironically -->

<button onclick = "play('audio2')">Play</button>
<button onclick = "pause('audio2')">Pause</button>
<button onclick = "stop('audio2')">Stop</button>
<audio src="Songs/Thierry Est Mort.WAV" id="audio2" class="audio"></audio>
<p class='songinfo'>Thierry Est Mort - <a href="rendevous.html">Rendevous</a> (Songs to Make Your Friends Like You Less, 2020)</p>

<button onclick = "play('audio3')">Play</button>
<button onclick = "pause('audio3')">Pause</button>
<button onclick = "stop('audio3')">Stop</button>
<audio src="Songs/But first, a word from today's sponsor, Raid Shadow Legends.WAV" id="audio3" class="audio"></audio>
<p class='songinfo'>But first, a word from today's sponsor, Raid Shadow Legends - <a href="rendevous.html">Rendevous</a> (Songs to Make Your Friends Like You Less, 2020)</p>

<button onclick = "play('audio4')">Play</button>
<button onclick = "pause('audio4')">Pause</button>
<button onclick = "stop('audio4')">Stop</button>
<audio src="Songs/Mr. Jourdain.WAV" id="audio4" class="audio"></audio>
<p class='songinfo'>Mr. Jourdain - <a href="rendevous.html">Rendevous</a> (Songs to Make Your Friends Like You Less, 2020)</p>

<button onclick = "play('audio5')">Play</button>
<button onclick = "pause('audio5')">Pause</button>
<button onclick = "stop('audio5')">Stop</button>
<audio src="Songs/Mohamed Bouazizi.WAV" id="audio5" class="audio"></audio>
<p class='songinfo'>Mohamed Bouazizi - <a href="rendevous.html">Rendevous</a> (Songs to Make Your Friends Like You Less, 2020)</p>

<button onclick = "play('audio6')">Play</button>
<button onclick = "pause('audio6')">Pause</button>
<button onclick = "stop('audio6')">Stop</button>
<audio src="Songs/Pika Pika.WAV" id="audio6" class="audio"></audio>
<p class='songinfo'>Pika Pika - <a href="rendevous.html">Rendevous</a> (Pika Pika - A Spiritual Awakening, 2020)</p>

<!-- this one was also written half-ironically -->

<button onclick = "play('audio7')">Play</button>
<button onclick = "pause('audio7')">Pause</button>
<button onclick = "stop('audio7')">Stop</button>
<audio src="Songs/Ce N'est Pas Cafe Gauthier.WAV" id="audio7" class="audio"></audio>
<p class='songinfo'>Ce N'est Pas Cafe Gauthier - <a href="rendevous.html">Rendevous</a> (Songs to Make Your Friends Like You Less, 2020)</p>

<h3>Songs I put actual effort into:</h3>

<!-- i'm actually fairly proud of both of these songs -->

<button onclick = "play('audio8')">Play</button>
<button onclick = "pause('audio8')">Pause</button>
<button onclick = "stop('audio8')">Stop</button>
<audio src="Songs/Let It Sleep.WAV" id="audio8" class="audio"></audio>
<p class='songinfo'>Let It Sleep (Instrumental) - <a href="rendevous.html">Rendevous</a></p>

<button onclick = "play('audio9')">Play</button>
<button onclick = "pause('audio9')">Pause</button>
<button onclick = "stop('audio9')">Stop</button>
<audio src="Songs/Angels Don't Kill.WAV" id="audio9" class="audio"></audio>
<p class='songinfo'>Angels Don't Kill (Instrumental) - <a href="childrenofbodom.html">Children of Bodom</a>, cover by <a href="rendevous.html">Rendevous</a></p>

            <h1 id="uid" style="color: white;"></h1>
            
            <!-- HERE IS YOUR HTML CODE TO SET TEXT -->
            <h3>Liked something (probably not)? Hated something (more likely)? Leave a comment expressing your flaming hatred for something I actually spent time on for some reason.</h3>

            <!-- here's the link to the firebase: user's can leave their comments expressing their furious expressions of disgust towards my music (via 'sendComment'). these comments can be retrieved (via 'getComment') and displayed on the website (in a numbered list) -->

            <button onclick = "signin()" >Sign In</button>
           
            <input type="text" id="commentID" placeholder="Enter comment" name="comment">
            
            <button onclick = "sendComment()">Submit Comment</button>
            <button onclick = "getComment()">Retrieve Comments</button>

            <p>Current Comments in the Database:</p>

            <!-- ol means ordered list -->
            <p><ol id="commentList"></ol></p>    
                 
    </body>

    <script>

      // functions to play, pause and stop audio

      // the play function is designed to pause any other song that is playing so that only one song can be played at once. the stop function not only stops the song, if said song is played again, it will begin playing from the beginning, whereas the pause function merely pauses the song and keeps the position

    	function play(id) {
    		const audios = document.getElementsByClassName("audio");
    		for(const audio of audios) {
    			audio.pause();
    		}
    		const audioFile = document.getElementById(id);
    		audioFile.play();
    	}

    	function pause(id) {
    		const audioFile = document.getElementById(id);
    		audioFile.pause();
    	}

    	function stop(id) {
    		const audioFile = document.getElementById(id);
    		audioFile.pause();
    		audioFile.currentTime = 0;
    	}

      var provider = new firebase.auth.GoogleAuthProvider();
      var userId = document.getElementById("uid").innerHTML;

      var config = {

        ///// COPY AND PASTE YOUR FIREBASE CONFIGURATION DATA HERE /////

        apiKey: "AIzaSyCRLT-wBh6WvQzQp-g6Bi52oAZgtUcm0_g",
        authDomain: "y10firebaseproject-frende.firebaseapp.com",
        databaseURL: "https://y10firebaseproject-frende.firebaseio.com",
        projectId: "y10firebaseproject-frende",
        storageBucket: "y10firebaseproject-frende.appspot.com",
        messagingSenderId: "660854506405",
        appId: "1:660854506405:web:f91f74704aaaf20d42de4c",
        measurementId: "G-LXCGXC6Y4Z"
      }


      firebase.initializeApp(config);
      //firebase.analytics();

      // Authentication Check: to see if you are logged in
      firebase.auth().onAuthStateChanged(function(user) {
          if (user == null) {
              document.getElementById("uid").innerHTML = "not logged in";
              return;
          } else {
              userId = user.uid; // you can also get .displayName, .photoURL, .email
              document.getElementById("uid").innerHTML = userId; // display Google uid on page
                
          } // end user null check
      }); // end check auth state


      // Functions that will be used to "get" and "set" data, among other "helper"
      // functions too...

      function signin() {
          var provider = new firebase.auth.GoogleAuthProvider();
          firebase.auth().signInWithRedirect(provider).then(function(result) {
          window.location.replace("fbtest.html");
        });
      } // end signin

      function sendComment() {

          // Create a database object that we can refer to
          var database = firebase.database();

          // Create a reference to a particular location or "node" called commentRepo
          var ref = database.ref('commentRepo');

          // Grab the Name, Subject, and Grade obtained from the HTML frontend textboxes
          var myComment = document.getElementById("commentID").value;
           
          // Create a JSON object to add to the database with user-inputted data
          var data = {
          
             commentFIELD: myComment

          }//end data

          // "PUSH" means we add something to the database
          ref.push(data);
      } // end sendComment

      function getComment() {

          // Create a database object that we can refer to
          var database = firebase.database();

          // Create a reference to a particular location or "node"
          // 'StudentInfo'is the name of the main branch in the database
          var ref = database.ref('commentRepo');

          // we will make reference to each 'value' of a database object which will have
          // two helper functions latched "on" to it to perform additional tasks
          // - either we have access to data values, or we don't and there is an error

          ref.on('value', gotData, errData)
          // jump to the helper function...think of 'value' as the parameter that is passed

      } // end getdata

      function gotData(comments){

          // clear items from previously created lists
          document.getElementById('commentList').innerHTML = "";
           
          // collect all of the unique objects ('keys' or id's) out of the database
          var commentData = comments.val(); // access the data 'value' of each student 'object'
          var keys = Object.keys(commentData);
          console.log(keys); //this works

          // iterate through the unique object id's and grab data fields
          for (var i = 0; i < keys.length; i++){
            var k = keys[i];
            var commentNODE = commentData[k].commentFIELD;
            console.log (keys[i]);
            console.log (commentNODE); //keeps coming up undefined!!!

            // DISPLAY COMMENTS
            // Create a reference to the ordered list called 'commentList'
            // called 'oListStudent'
            var oListComment = document.getElementById('commentList');
            var entry = document.createElement('li'); // a list element to be added to the ordered list
            entry.appendChild(document.createTextNode(commentNODE));
            oListComment.appendChild(entry);
             
            // AJ: we only need to send information to the console window when we are debugging our code of errors
            

          }
      }

      function errData(err){
        console.log('Error!')
        console.log(err)
      }

  </script>
    
</html>
